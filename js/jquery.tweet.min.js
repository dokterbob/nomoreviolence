(function(A){A.fn.tweet=function(F){var E=A.extend({username:["seaofclouds"],list:null,favorites:false,avatar_size:null,count:3,fetch:null,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,query:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:function(G){return G.avatar+G.time+G.join+G.text;},comparator:function(H,G){return H.tweet_time-G.tweet_time;},filter:function(G){return true;}},F);A.fn.extend({linkUrl:function(){var G=[];var H=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;this.each(function(){G.push(this.replace(H,function(J){var I=(/^[a-z]+:/i).test(J)?J:"http://"+J;return'<a href="'+I+'">'+J+"</a>";}));});return A(G);},linkUser:function(){var G=[];var H=/[\@]+([A-Za-z0-9-_]+)/gi;this.each(function(){G.push(this.replace(H,'<a href="http://'+E.twitter_url+'/$1">@$1</a>'));});return A(G);},linkHash:function(){var G=[];var H=/(?:^| )[\#]+([A-Za-z0-9-_]+)/gi;this.each(function(){G.push(this.replace(H,' <a href="http://'+E.twitter_search_url+"/search?q=&tag=$1&lang=all&from="+E.username.join("%2BOR%2B")+'">#$1</a>'));});return A(G);},capAwesome:function(){var G=[];this.each(function(){G.push(this.replace(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'));});return A(G);},capEpic:function(){var G=[];this.each(function(){G.push(this.replace(/\b(epic)\b/gi,'<span class="epic">$1</span>'));});return A(G);},makeHeart:function(){var G=[];this.each(function(){G.push(this.replace(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>"));});return A(G);}});function B(G){return Date.parse(G.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"));}function D(H){var G=B(H);var J=(arguments.length>1)?arguments[1]:new Date();var K=parseInt((J.getTime()-G)/1000,10);var I="";if(K<60){I=K+" seconds ago";}else{if(K<120){I="a minute ago";}else{if(K<(45*60)){I=(parseInt(K/60,10)).toString()+" minutes ago";}else{if(K<(2*60*60)){I="an hour ago";}else{if(K<(24*60*60)){I=""+(parseInt(K/3600,10)).toString()+" hours ago";}else{if(K<(48*60*60)){I="a day ago";}else{I=(parseInt(K/86400,10)).toString()+" days ago";}}}}}}return"about "+I;}function C(){var H=("https:"==document.location.protocol?"https:":"http:");var G=(E.fetch===null)?E.count:E.fetch;if(E.list){return H+"//"+E.twitter_api_url+"/1/"+E.username[0]+"/lists/"+E.list+"/statuses.json?per_page="+G+"&callback=?";}else{if(E.favorites){return H+"//"+E.twitter_api_url+"/favorites/"+E.username[0]+".json?count="+E.count+"&callback=?";}else{if(E.query===null&&E.username.length==1){return H+"//"+E.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+E.username[0]+"&count="+G+"&include_rts=1&callback=?";}else{var I=(E.query||"from:"+E.username.join(" OR from:"));return H+"//"+E.twitter_search_url+"/search.json?&q="+encodeURIComponent(I)+"&rpp="+G+"&callback=?";}}}}return this.each(function(H,K){var J=A('<ul class="tweet_list">').appendTo(K);var I='<p class="tweet_intro">'+E.intro_text+"</p>";var G='<p class="tweet_outro">'+E.outro_text+"</p>";var L=A('<p class="loading">'+E.loading_text+"</p>");if(typeof (E.username)=="string"){E.username=[E.username];}if(E.loading_text){A(K).append(L);}A(K).bind("load",function(){A.getJSON(C(),function(M){if(E.loading_text){L.remove();}if(E.intro_text){J.before(I);}J.empty();var N=A.map(M.results||M,function(d){var S=E.join_text;if(E.join_text=="auto"){if(d.text.match(/^(@([A-Za-z0-9-_]+)) .*/i)){S=E.auto_join_text_reply;}else{if(d.text.match(/(^\w+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+) .*/i)){S=E.auto_join_text_url;}else{if(d.text.match(/^((\w+ed)|just) .*/im)){S=E.auto_join_text_ed;}else{if(d.text.match(/^(\w*ing) .*/i)){S=E.auto_join_text_ing;}else{S=E.auto_join_text_default;}}}}}var e=d.from_user||d.user.screen_name;var P=d.source;var Z="http://"+E.twitter_url+"/"+e;var Y=E.avatar_size;var X=d.profile_image_url||d.user.profile_image_url;var c="http://"+E.twitter_url+"/"+e+"/statuses/"+d.id_str;var W=d.created_at;var R=D(W);var U=d.text;var O=A([U]).linkUrl().linkUser().linkHash()[0];var V='<a class="tweet_user" href="'+Z+'">'+e+"</a>";var Q=((E.join_text)?('<span class="tweet_join"> '+S+" </span>"):" ");var a=(Y?('<a class="tweet_avatar" href="'+Z+'"><img src="'+X+'" height="'+Y+'" width="'+Y+'" alt="'+e+'\'s avatar" title="'+e+'\'s avatar" border="0"/></a>'):"");var T='<span class="tweet_time"><a href="'+c+'" title="view tweet on twitter">'+R+"</a></span>";var b='<span class="tweet_text">'+A([O]).makeHeart().capAwesome().capEpic()[0]+"</span>";return{item:d,screen_name:e,user_url:Z,avatar_size:Y,avatar_url:X,source:P,tweet_url:c,tweet_time:W,tweet_relative_time:R,tweet_raw_text:U,tweet_text:O,user:V,join:Q,avatar:a,time:T,text:b};});N=A.grep(N,E.filter).slice(0,E.count);J.append(A.map(N.sort(E.comparator),function(O){return"<li>"+E.template(O)+"</li>";}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");if(E.outro_text){J.after(G);}A(K).trigger("loaded").trigger((N.length===0?"empty":"full"));if(E.refresh_interval){window.setTimeout(function(){A(K).trigger("load");},1000*E.refresh_interval);}});}).trigger("load");});};})(jQuery);